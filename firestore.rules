/**
 * @fileOverview Firestore Security Rules for the application.
 *
 * Core Philosophy:
 * This ruleset prioritizes rapid prototyping by granting broad access.
 * This is NOT a production-ready ruleset. It should be refined iteratively
 * as the application evolves.
 *
 * Data Structure:
 * - /users/{userId}: Stores seller profile information, with `userId` matching the authenticated user's UID.
 * - /products/{productId}: Stores all products for all stores.
 * - /orders/{orderId}: Stores all orders for all stores.
 *
 * Key Security Decisions:
 * - All read and write operations are currently allowed. This is intended for
 *   development purposes only and should be tightened as the application matures.
 *
 * Denormalization for Authorization:
 * - No denormalization is currently implemented due to the broad access policy.
 *
 * Structural Segregation:
 * - No structural segregation is implemented due to the broad access policy.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows all operations on user documents.
     * @path /users/{userId}
     * @allow (create) - Any authenticated user can create a user document.
     * @allow (get) - Any user can read a user document.
     * @allow (update) - Any user can update a user document.
     * @allow (delete) - Any user can delete a user document.
     * @principle Allows all operations for rapid prototyping.
     */
    match /users/{userId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows all operations on product documents.
     * @path /products/{productId}
     * @allow (create) - Any authenticated user can create a product document.
     * @allow (get) - Any user can read a product document.
     * @allow (update) - Any user can update a product document.
     * @allow (delete) - Any user can delete a product document.
     * @principle Allows all operations for rapid prototyping.
     */
    match /products/{productId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows all operations on order documents.
     * @path /orders/{orderId}
     * @allow (create) - Any authenticated user can create an order document.
     * @allow (get) - Any user can read an order document.
     * @allow (update) - Any user can update an order document.
     * @allow (delete) - Any user can delete an order document.
     * @principle Allows all operations for rapid prototyping.
     */
    match /orders/{orderId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }
  }
}